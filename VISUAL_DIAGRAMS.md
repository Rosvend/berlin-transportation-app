# ğŸ¨ Diagrama Visual para la PresentaciÃ³n

## Arquitectura del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USUARIO (Navegador)                         â”‚
â”‚                    http://YOUR_EC2_IP:3000                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (Port 3000)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  index.html  â”‚  â”‚   app.js     â”‚  â”‚  config.js   â”‚              â”‚
â”‚  â”‚  Bootstrap   â”‚  â”‚  Leaflet.js  â”‚  â”‚  (API URL    â”‚              â”‚
â”‚  â”‚  Font Awesomeâ”‚  â”‚  LocalStorageâ”‚  â”‚  detection)  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                     â”‚
â”‚  Features:                                                          â”‚
â”‚  â€¢ BÃºsqueda de estaciones                                           â”‚
â”‚  â€¢ Mapa interactivo (Leaflet)                                       â”‚
â”‚  â€¢ Radar de vehÃ­culos                                               â”‚
â”‚  â€¢ Favoritos (LocalStorage)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP REST API
                             â”‚ (JSON)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND API (Port 8000)                          â”‚
â”‚                        FastAPI + Uvicorn                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API ENDPOINTS (Routers)                                      â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  GET  /health                    â†’ Health check               â”‚  â”‚
â”‚  â”‚  GET  /api/stations/search       â†’ BÃºsqueda estaciones        â”‚  â”‚
â”‚  â”‚  GET  /api/stations/all          â†’ Todas las estaciones       â”‚  â”‚
â”‚  â”‚  GET  /api/stations/featured     â†’ Estaciones destacadas      â”‚  â”‚
â”‚  â”‚  GET  /api/departures/{id}       â†’ Salidas en tiempo real     â”‚  â”‚
â”‚  â”‚  GET  /api/radar/vehicles        â†’ PosiciÃ³n de vehÃ­culos      â”‚  â”‚
â”‚  â”‚  GET  /api/cache/stats           â†’ EstadÃ­sticas de cachÃ©      â”‚  â”‚
â”‚  â”‚  POST /api/cache/clear           â†’ Limpiar cachÃ©              â”‚  â”‚
â”‚  â”‚  POST /api/cache/cleanup         â†’ Limpiar expirados          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                       â”‚
â”‚                             â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  BUSINESS LOGIC (Services)                                    â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  BVGClient:                                                    â”‚  â”‚
â”‚  â”‚    â€¢ search_stations(query)                                   â”‚  â”‚
â”‚  â”‚    â€¢ get_departures(station_id)                               â”‚  â”‚
â”‚  â”‚    â€¢ get_radar(north, south, east, west)                      â”‚  â”‚
â”‚  â”‚    â€¢ Retry logic (max 1 retry, 5s timeout)                    â”‚  â”‚
â”‚  â”‚    â€¢ @cached decorator (automatic caching)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                       â”‚
â”‚                             â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CACHE LAYER (utils/cache.py)                                 â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Strategy: Redis Primary + In-Memory Fallback                 â”‚  â”‚
â”‚  â”‚  TTL: 300 seconds (5 minutes)                                 â”‚  â”‚
â”‚  â”‚  Key: hash(function_name + args)                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Stats:                                                        â”‚  â”‚
â”‚  â”‚    â€¢ hits: 823                                                 â”‚  â”‚
â”‚  â”‚    â€¢ misses: 177                                               â”‚  â”‚
â”‚  â”‚    â€¢ hit_rate: 82.3%                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LAYER                                       â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  REDIS CACHE     â”‚              â”‚  BVG API         â”‚            â”‚
â”‚  â”‚  (Port 6379)     â”‚              â”‚  External REST   â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚            â”‚
â”‚  â”‚  â€¢ Key-Value     â”‚              â”‚  v6.bvg.         â”‚            â”‚
â”‚  â”‚  â€¢ TTL: 300s     â”‚              â”‚  transport.rest  â”‚            â”‚
â”‚  â”‚  â€¢ Persistent    â”‚              â”‚                  â”‚            â”‚
â”‚  â”‚  â€¢ Volume mount  â”‚              â”‚  Endpoints:      â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚  â€¢ /locations    â”‚            â”‚
â”‚  â”‚  Fallback:       â”‚              â”‚  â€¢ /stops/{id}/  â”‚            â”‚
â”‚  â”‚  In-Memory Dict  â”‚              â”‚    departures    â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚  â€¢ /radar        â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flujo de Datos: BÃºsqueda de EstaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Usuario   â”‚ 1. Escribe "Alexanderplatz"
â”‚  (Browser) â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ 2. GET /api/stations/search?q=Alexanderplatz
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend JS       â”‚ 3. fetch(API_URL + '/stations/search?q=...')
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ HTTP Request
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend FastAPI                           â”‚
â”‚  â””â”€ stations.py router                     â”‚
â”‚     â””â”€ async def search_stations(q: str)   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ 4. Llama a BVGClient.search_stations("Alexanderplatz")
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BVGClient (@cached decorator)             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ 5. Verifica cachÃ©
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cache Layer    â”‚ 6. cache_key = hash("search_stations_Alexanderplatz")
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚             â”‚
   HIT (82%)     MISS (18%)
      â”‚             â”‚
      â”‚             â”œâ”€ 7. Llama a BVG API
      â”‚             â”‚    GET https://v6.bvg.transport.rest/locations?query=Alexanderplatz
      â”‚             â”‚
      â”‚             â”œâ”€ 8. BVG API responde (1-3 segundos)
      â”‚             â”‚    {"locations": [...]}
      â”‚             â”‚
      â”‚             â””â”€ 9. Guarda en cachÃ© (TTL: 300s)
      â”‚                  redis.setex(key, 300, json_data)
      â”‚             â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€ 10. Retorna datos
                         (HIT: ~50ms, MISS: ~2s)
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend FastAPI                           â”‚
â”‚  11. Valida con Pydantic models            â”‚
â”‚  12. Formatea respuesta JSON               â”‚
â”‚      {"stations": [...]}                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ HTTP Response (JSON)
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend JS       â”‚ 13. Renderiza resultados en mapa
â”‚                    â”‚     Leaflet.marker([lat, lng]).addTo(map)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Usuario   â”‚ 14. Ve estaciones en mapa (< 1 segundo total)
â”‚  (Browser) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tiempo Total:**
- **Con Cache Hit:** ~200ms (50ms cachÃ© + 150ms red)
- **Con Cache Miss:** ~2.5s (2s API + 500ms procesamiento)
- **Promedio (82% hit rate):** ~0.24s âœ…

---

## ComparaciÃ³n de Performance

```
SIN CACHÃ‰:
Usuario â†’ Backend â†’ BVG API (3s) â†’ Backend â†’ Usuario
Total: ~3.5 segundos â±ï¸â±ï¸â±ï¸

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 3.5s


CON CACHÃ‰ (Hit):
Usuario â†’ Backend â†’ Redis (50ms) â†’ Backend â†’ Usuario
Total: ~0.2 segundos âš¡

â–ˆâ–ˆâ–ˆâ–ˆ 0.2s


MEJORA: 93% mÃ¡s rÃ¡pido! ğŸš€
```

---

## Diagrama de Componentes Docker

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AWS EC2 Instance                       â”‚
â”‚                      Ubuntu 22.04 LTS                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            Docker Compose Network                     â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚ â”‚
â”‚  â”‚  â”‚  frontend        â”‚  Port 3000:80                  â”‚ â”‚
â”‚  â”‚  â”‚  (nginx:alpine)  â”‚                                â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  Sirve:                        â”‚ â”‚
â”‚  â”‚  â”‚  /usr/share/     â”‚  â€¢ index.html                  â”‚ â”‚
â”‚  â”‚  â”‚   nginx/html/    â”‚  â€¢ app.js                      â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  â€¢ config.js                   â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  â€¢ styles.css                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚ â”‚
â”‚  â”‚  â”‚  backend         â”‚  Port 8000:8000                â”‚ â”‚
â”‚  â”‚  â”‚  (python:3.9)    â”‚                                â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  Ejecuta:                      â”‚ â”‚
â”‚  â”‚  â”‚  /app/           â”‚  uvicorn app.main:app          â”‚ â”‚
â”‚  â”‚  â”‚    main.py       â”‚                                â”‚ â”‚
â”‚  â”‚  â”‚    api/          â”‚  Environment:                  â”‚ â”‚
â”‚  â”‚  â”‚    services/     â”‚  â€¢ REDIS_HOST=redis            â”‚ â”‚
â”‚  â”‚  â”‚    models/       â”‚  â€¢ REDIS_PORT=6379             â”‚ â”‚
â”‚  â”‚  â”‚    utils/        â”‚                                â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  Health Check:                 â”‚ â”‚
â”‚  â”‚  â”‚  Health: UP âœ“    â”‚  curl localhost:8000/health    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚ â”‚
â”‚  â”‚  â”‚  redis           â”‚  Port 6379:6379                â”‚ â”‚
â”‚  â”‚  â”‚  (redis:7-alpine)â”‚                                â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  Volume:                       â”‚ â”‚
â”‚  â”‚  â”‚  /data           â”‚  redis_data:/data              â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚                                â”‚ â”‚
â”‚  â”‚  â”‚  Health: UP âœ“    â”‚  Health Check:                 â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚  redis-cli ping                â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Security Group:                                            â”‚
â”‚    â€¢ Port 22 (SSH)                                          â”‚
â”‚    â€¢ Port 3000 (Frontend)                                   â”‚
â”‚    â€¢ Port 8000 (Backend API)                                â”‚
â”‚    â€¢ Port 6379 (Redis - internal only)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Testing Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TESTING STRATEGY                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. UNIT TESTS (tests/test_bvg_client.py, test_cache.py)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ BVGClient.search_stations()              â”‚
   â”‚  â€¢ BVGClient.get_departures()               â”‚
   â”‚  â€¢ Cache.get() / Cache.set()                â”‚
   â”‚  â€¢ Mocking de API externa                   â”‚
   â”‚                                             â”‚
   â”‚  pytest tests/test_bvg_client.py -v         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
2. INTEGRATION TESTS (tests/test_api_endpoints.py)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ GET /api/stations/search                 â”‚
   â”‚  â€¢ GET /api/departures/{id}                 â”‚
   â”‚  â€¢ GET /api/radar/vehicles                  â”‚
   â”‚  â€¢ GET /api/cache/stats                     â”‚
   â”‚  â€¢ ValidaciÃ³n de response schemas           â”‚
   â”‚                                             â”‚
   â”‚  pytest tests/test_api_endpoints.py -v      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
3. PERFORMANCE TESTS (test_latency.py)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ Mide latencia de cada endpoint           â”‚
   â”‚  â€¢ Valida < 1 segundo con cachÃ©             â”‚
   â”‚  â€¢ EstadÃ­sticas: avg, min, max              â”‚
   â”‚                                             â”‚
   â”‚  python test_latency.py                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
4. CACHE PERFORMANCE (test_cache_performance.py)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ 1000 requests a API                      â”‚
   â”‚  â€¢ Mide hit rate                            â”‚
   â”‚  â€¢ Valida > 70%                             â”‚
   â”‚                                             â”‚
   â”‚  python test_cache_performance.py           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULTS:
  âœ… 25+ tests passing
  âœ… ~75% code coverage
  âœ… Latency < 1s
  âœ… Hit rate > 80%
```

---

## Stack TecnolÃ³gico Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TECH STACK                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FRONTEND
â”œâ”€â”€ HTML5                  (Estructura)
â”œâ”€â”€ CSS3 + Bootstrap 5     (Estilos responsive)
â”œâ”€â”€ JavaScript ES6+        (LÃ³gica del cliente)
â”œâ”€â”€ Leaflet.js 1.9.4       (Mapas interactivos)
â”œâ”€â”€ Font Awesome 6.4       (Iconos)
â””â”€â”€ LocalStorage API       (Persistencia local)

BACKEND
â”œâ”€â”€ Python 3.9+            (Lenguaje)
â”œâ”€â”€ FastAPI 0.68           (Framework web)
â”œâ”€â”€ Uvicorn 0.15           (ASGI server)
â”œâ”€â”€ Pydantic               (ValidaciÃ³n de datos)
â”œâ”€â”€ Requests 2.26          (HTTP client)
â””â”€â”€ python-dotenv 0.19     (Variables de entorno)

DATA & CACHING
â”œâ”€â”€ Redis 7                (CachÃ© distribuido)
â””â”€â”€ In-Memory Dict         (Fallback cache)

TESTING
â”œâ”€â”€ pytest 7.4             (Framework de testing)
â”œâ”€â”€ pytest-asyncio 0.21    (Testing async)
â””â”€â”€ unittest.mock          (Mocking)

INFRASTRUCTURE
â”œâ”€â”€ Docker                 (ContainerizaciÃ³n)
â”œâ”€â”€ Docker Compose         (OrquestaciÃ³n)
â”œâ”€â”€ Nginx (alpine)         (Web server frontend)
â””â”€â”€ AWS EC2                (Cloud hosting)

DEVOPS
â”œâ”€â”€ Git + GitHub           (Version control)
â”œâ”€â”€ bash scripts           (Automation)
â”œâ”€â”€ Health checks          (Monitoring)
â””â”€â”€ Structured logging     (Observability)
```

---

**Â¡Ãšsalo para tu presentaciÃ³n! ğŸ¤**

Estos diagramas te ayudarÃ¡n a:
1. âœ… Explicar la arquitectura visualmente
2. âœ… Mostrar el flujo de datos
3. âœ… Demostrar la mejora de performance
4. âœ… Ilustrar el deployment con Docker

