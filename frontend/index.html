<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlin Transport App</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-train"></i>
                Transporte Berlín
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <!-- Espacio para futuros enlaces -->
                </ul>
                <button class="btn btn-outline-light btn-sm ms-auto" id="dark-mode-toggle" onclick="toggleDarkMode()"
                        title="Cambiar entre modo claro y oscuro. Tu preferencia se guarda automáticamente">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <style>
        :root {
            --primary: #2D3047;       /* Azul oscuro elegante */
            --secondary: #419D78;     /* Verde menta */
            --accent: #E0A458;        /* Naranja suave */
            --background: #F5F5F5;    /* Gris muy claro */
            --text: #2D3047;         /* Azul oscuro para texto */
            --light-text: #666B8D;   /* Gris azulado para texto secundario */
            --success: #419D78;      /* Verde menta para éxito */
            --warning: #E0A458;      /* Naranja suave para advertencias */
            --danger: #C1292E;       /* Rojo suave para errores */
            --card-bg: #FFFFFF;      /* Blanco para tarjetas */
        }

        body {
            background: var(--background);
            color: var(--text);
        }

        .custom-navbar {
            background-color: var(--primary) !important;
            box-shadow: 0 2px 8px rgba(45,48,71,0.1);
        }

        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: #373B59;
            border-color: #373B59;
        }

        .card {
            background: var(--card-bg);
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(45,48,71,0.1);
        }

        .station-card {
            border-left: 4px solid var(--primary);
        }

        .station-card.major-hub {
            border-left-color: var(--accent);
        }

        .station-card.regional-hub {
            border-left-color: var(--secondary);
        }

        .badge.bg-primary {
            background-color: var(--primary) !important;
        }

        .badge.bg-warning {
            background-color: var(--accent) !important;
            color: white;
        }

        .badge.bg-info {
            background-color: var(--secondary) !important;
            color: white;
        }
    </style>

    <!-- Main Content -->
    <div class="container mt-4 mb-5" style="max-width: 1400px; padding-left: 20px; padding-right: 20px;">
        <div class="row">
            <!-- Search Section -->
            <div class="col-md-12 mb-4">
                <div class="card">
                    <div class="card-body" style="padding: 1.5rem;">
                        <h5 class="mb-3">
                            <i class="fas fa-search"></i> Buscar Estación
                        </h5>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white">
                                <i class="fas fa-search text-muted"></i>
                            </span>
                            <input type="text" class="form-control border-start-0" 
                                   placeholder="Escribe para buscar... (ej: Alex, Haupt, Zoo...)" 
                                   id="search-input"
                                   aria-label="Nombre de la estación"
                                   title="Escribe al menos 2 letras para buscar automáticamente">
                            <button class="btn btn-primary" type="button" id="search-button"
                                    title="Buscar estaciones de transporte en Berlín">
                                <i class="fas fa-search"></i> Buscar
                            </button>
                        </div>
                        <small class="text-muted mt-2 d-block">
                            <i class="fas fa-info-circle"></i> La búsqueda es automática mientras escribes (mín. 2 caracteres)
                        </small>
                        <div class="mt-3">
                            <button class="btn btn-outline-secondary" id="show-all-stations"
                                    title="Muestra estaciones populares como Alexanderplatz, Hauptbahnhof y Zoo">
                                <i class="fas fa-list"></i> Ver Todas las Estaciones
                            </button>
                            <button class="btn btn-outline-warning" id="show-favorites" style="margin-left: 10px;"
                                    title="Ver tus estaciones favoritas guardadas">
                                Favoritos (<span id="favorites-count">0</span>)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-4">
            <!-- Results Section -->
            <div class="col-md-6">
                <div class="card" style="min-height: 400px;">
                    <div class="card-body" style="padding: 1.5rem;">
                        <h5 class="card-title">
                            <i class="fas fa-map-marker-alt"></i> Estaciones
                        </h5>
                        <div id="results-container" class="mt-3">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-search fa-3x mb-3"></i>
                                <p>Busca una estación o muestra todas las estaciones disponibles</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Departures Section -->
            <div class="col-md-6">
                <div class="card" style="min-height: 400px;">
                    <div class="card-body" style="padding: 1.5rem;">
                        <h5 class="card-title">
                            <i class="fas fa-clock"></i> Próximas Salidas
                        </h5>
                        <div id="departures-container" class="mt-3">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-train fa-3x mb-3"></i>
                                <p>Selecciona una estación para ver los horarios en tiempo real</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Map Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body" style="padding: 1.5rem;">
                        <h5 class="card-title">
                            <i class="fas fa-map"></i> Mapa de Transporte
                        </h5>
                        <div id="map"></div>
                        <div class="mt-3">
                            <button class="btn btn-sm btn-outline-secondary" id="center-map-btn"
                                    title="Centra el mapa en Berlín y restablece el zoom por defecto">
                                <i class="fas fa-crosshairs"></i> Centrar Mapa en Berlín
                            </button>
                            <button class="btn btn-sm btn-outline-info" id="toggle-radar-btn" onclick="toggleRadar()"
                                    title="Activa/desactiva la visualización de buses, trenes y tranvías en movimiento">
                                <i class="fas fa-broadcast-tower"></i> Radar OFF
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
